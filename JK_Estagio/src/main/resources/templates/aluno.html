<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head th:insert="~{layout/cabecalho}">
<meta charset="ISO-8859-1">
	<title>Página de Alunos</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.11/jquery.mask.min.js"></script>
</head>
<style>
		#P{
			margin: 0px 0px 20px 0px;
		}
		#botao{
			background-color: #0a4275;
		}	
		#margin{
			margin: 0px 10px 10px 10px;
		}
		
</style>

<body>
	<div th:insert="~{layout/menu}"></div>
<div sec:authorize="hasAnyAuthority('administrador')">
	<form name="salvar_aluno" class="form-horizontal" method="post" th:action="@{/salvar_aluno}"
		th:object="${alunoEntity}">
		<div class="container-fluid">
			<h2>Alunos</h2>

			<!--Começa cadastro de docentes -->
			
				<div class="alert alert-sucess" th:text="${mensagem}" th:if="${not #strings.isEmpty(mensagem)}"></div>
				<div class="mb-3">
					<label for="nome" class="form-label">Nome</label>
					<input type="text" class="form-control" maxlength="45"  id="nome" name="nome" required>
				</div>
				<div class="mb-3">
					<label for="telefone" class="form-label">Telefone</label>
					<input type="text" class="form-control" id="telefone" name="telefone" required minlength="14">
				</div>
				
				<script type="text/javascript">
    			$("#telefone").mask("(00) 0000-0000");
    			</script>
				
				<div class="mb-3">
								<label for="turno" class="form-label">Turno</label>
								  <select class="form-select" aria-label="Selecione o turno" id="turno" name="turno" required>
									<option value="">Selecione o turno</option>
									<option th:each="turno : ${turno}" th:text="${turno.nome}" th:value="${turno.idTurno}" >
								  </select>
								</div>
				
				<div class="mb-3">
				<label for="escola" class="form-label">Escola</label>
				<select class="form-select" aria-label="Selecione a escola" id="escola" name="escola" required>
				   <option value="">Selecione a escola</option>
				   <option th:each="escola : ${escola}" th:text="${escola.nome}" th:value="${escola.idEscola}" >
				</select>
				</div>
				
				<div class="mb-3">
				<label for="curso" class="form-label">Curso</label>
				<select class="form-select" aria-label="Selecione o curso" id="curso" name="curso" required>
				   <option value="">Selecione o curso</option>
				   <option th:each="curso : ${curso}" th:text="${curso.nome}" th:value="${curso.idCurso}" >
				</select>
				</div>
		
				<div class="mb-e">
					<button id="botao" type="submit" class="btn btn-success form-control">Salvar</button>
				</div>
			</div>
			<!-- Termina cadastro de docentes -->
		</div>
		</div><!--Começa lista de docentes-->
		
<div id="margin">		
		<div sec:authorize="hasAnyAuthority('administrador')">
			<br>
		<h5 class="card-title">Alunos cadastrados</h5>
		<table id="aluno" class="table table-sn table-striped table-hover table-bordered">
			<thead>
				<tr>
					<th>ID</th>
					<th class="col-5">Nome</th>
					<th>Telefone</th>
					<th>Curso</th>
					<th>Turno</th>
					
					<th class="col-1"></th>
					<th class="col-1"></th>
				</tr>
			</thead>
			<tbody>
				<tr  th:each="aluno : ${aluno}">
					<td th:text="${aluno.IdAluno}"></td>
					<td th:text="${aluno.Nome}"></td>
					<td th:text="${aluno.Telefone}"></td>
					<td th:text="${aluno.curso.Nome}"></td>
					<td th:text="${aluno.turno.Nome}"></td>
					
					<td><a type="button" class="btn btn-outline-warning" th:href="@{alterar_aluno/{idAluno}(idAluno=${aluno.IdAluno})}">Alterar</a></td>
					<!--Começa o excluir-->
					<td>
						<a type="button" class="btn btn-outline-danger"
							th:href="@{excluir_aluno/{idAluno}(idAluno=${aluno.IdAluno})}"
							onclick="if (confirm('Deseja realmente excluir o aluno?')){return true;}else{event.stopPropagation();event.preventDefault();};">
							Excluir
						</a>
					</td>
	         	<!--Termina Exclusão-->
				</tr>

			</tbody>

		</table>
		</div>

	
	<script>
	$(document).ready( function (){
    var table = new DataTable('#aluno', {
		pageLength: 96,	/*Coloquei quantidade completa de itens pois não está salvando a disponibilidade de itens de páginas diferentes*/
		layout: {
		    topStart: 
		    {       
		            buttons: [
		               /* {
		                    extend: 'copyHtml5',
		                    title: 'Disponibilidade Docente'
		                },
		                {
		                    extend: 'excelHtml5',
		                    title: 'Disponibilidade Docente'
		                },
		                {
		                    extend: 'csvHtml5',
		                    title: 'Disponibilidade Docente'
		                },*/
		                {
		                    extend: 'pdfHtml5',
		                    title: 'Disponibilidade Docente'
		                },
		                {
		                    extend: 'print',
		                    title: 'Disponibilidade Docente'
		                }
		            ]
		            
		    }
		    },	
	
    language: 
	{
		url: 'https://cdn.datatables.net/plug-ins/2.0.2/i18n/pt-BR.json',
    },
	
	
});

} );
</script>
</div>	

		
		<div sec:authorize="hasAnyAuthority('empresa')">
		<h5 class="card-title">Alunos cadastrados</h5>
		<table id="aluno2" class="table table-sn table-striped table-hover table-bordered">
			<thead>
				<tr>
					<th>ID</th>
					<th class="col-5">Nome</th>
					<th>Telefone</th>
					<th>Curso</th>
					<th>Turno</th>
				</tr>
			</thead>
			<tbody>
				<tr  th:each="aluno : ${aluno}">
					<td th:text="${aluno.IdAluno}"></td>
					<td th:text="${aluno.Nome}"></td>
					<td th:text="${aluno.Telefone}"></td>
					<td th:text="${aluno.curso.Nome}"></td>
					<td th:text="${aluno.turno.Nome}"></td>
					</td>
	         	<!--Termina Exclusão-->
				</tr>

			</tbody>

		</table>
		</div>

	
	<script>
	$(document).ready( function (){
    var table = new DataTable('#aluno2', {
		pageLength: 96,	/*Coloquei quantidade completa de itens pois não está salvando a disponibilidade de itens de páginas diferentes*/
		layout: {
		    topStart: 
		    {       
		            buttons: [
		               /* {
		                    extend: 'copyHtml5',
		                    title: 'Disponibilidade Docente'
		                },
		                {
		                    extend: 'excelHtml5',
		                    title: 'Disponibilidade Docente'
		                },
		                {
		                    extend: 'csvHtml5',
		                    title: 'Disponibilidade Docente'
		                },*/
		                {
		                    extend: 'pdfHtml5',
		                    title: 'Disponibilidade Docente'
		                },
		                {
		                    extend: 'print',
		                    title: 'Disponibilidade Docente'
		                }
		            ]
		            
		    }
		    },	
	
    language: 
	{
		url: 'https://cdn.datatables.net/plug-ins/2.0.2/i18n/pt-BR.json',
    },
	
	
});

} );
</script>
</div>
</div>
	</form>
	

		
       
	



	<div th:insert="~{layout/rodape}"></div>

</body>

</html>
